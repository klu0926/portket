(()=>{"use strict";var e={183:(e,t,r)=>{r.d(t,{Z:()=>s});const s=class{constructor(){this.alertMessage=document.querySelector("#alert-message"),this.alertCloseBtn=document.querySelector("#alert-message-close-btn"),this.init()}init(){this.alertCloseBtn.addEventListener("click",(()=>{this.hideAlertMessage()}))}showAlertMessage(e,t){e||(e="Something went wrong."),this.alertMessage.querySelector(".alert-message-text").innerText=e,this.resetClass(this.alertMessage,"marginShake"),this.alertMessage.style.display="block"}hideAlertMessage(){this.alertMessage.style.display="none"}resetClass(e,t){e.classList.remove(t),setTimeout((()=>{e.classList.add(t)}),40)}}}},t={};function r(s){var a=t[s];if(void 0!==a)return a.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,r),n.exports}r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=r(183);class t{constructor(){this.getProjectsUrl="/api/projects",this.getUsersUrl="/api/users",this.currentUserData=document.querySelector("#current-user-data"),this.currentUserId=this.currentUserData.dataset.id}async getProjects(e=this.currentUserId){try{const t=`${this.getProjectsUrl}?userId=${e}`,r=await fetch(t);return await r.json()}catch(e){return e}}async getUsers(e=10,t="visit"){try{const r=`${this.getUsersUrl}?limit=${e}&sort=${t}`,s=await fetch(r);return await s.json()}catch(e){return e}}}class s{constructor(){this.navbarAvatarImg=document.querySelector("#navbar-avatar-img"),this.navbarAvatarMenu=document.querySelector("#navbar-avatar-div-menu"),this.body=document.querySelector("body"),this.hamburgerMenu=document.querySelector("#hamburger-menu"),this.bodyDisableCover=document.querySelector("#body-disable-cover"),this.hamburgerMenuProjectsContainer=document.querySelector("#hamburger-menu-my-projects-container"),this.hamburgerMenuTopUsersContainer=document.querySelector("#hamburger-menu-top-user-container")}showHamburgerMenu(){this.body.style.overflowY="hidden",this.bodyDisableCover.style.display="block",this.hamburgerMenu.classList.add("show-menu")}hideHamburgerMenu(){this.body.style.overflowY="scroll",this.bodyDisableCover.style.display="none",this.hamburgerMenu.classList.remove("show-menu")}toggleNavbarAvatarMenu(e){if(!this.navbarAvatarImg||!this.navbarAvatarMenu||!e)return;e!==this.navbarAvatarImg?(e=>{e&&(e.classList.contains("hide")||this.navbarAvatarMenu.classList.add("hide"))})(e):(e=>{e&&(this.navbarAvatarMenu.classList.contains("hide")?this.navbarAvatarMenu.classList.remove("hide"):this.navbarAvatarMenu.classList.add("hide"))})(e)}renderMenuLink(e,t,r="name",s){e.innerHTML="";let a="";if(t&&0!==t.length){for(let e=0;e<t.length;e++){let n="";"projects"===s?n='<i class="fa-regular fa-file-lines navbar-links-icon"></i>':"users"===s&&(n=`<div class="hamburger-menu-avatar-div">\n            <img id="navbar-avatar-img" class="navbar-avatar-img" src=${t[e].avatarSmall} alt="avatar"/>\n          </div>`),a+=`\n      <a href="/${s}/${t[e].id}" class="hamburger-menu-link" aria-label="project">\n          <div class="hamburger-menu-link-content">\n            ${n}\n            <span class="hamburger-menu-text" title=${t[e][r]}>${t[e][r]}</span>\n          </div>\n          </a>`}e.innerHTML=a}}}class a{constructor(t,r){this.view=t,this.model=r,this.alertMessage=new e.Z,this.init()}init(){document.addEventListener("click",(e=>this.hamburgerMenuToggle(e)))}async hamburgerMenuToggle(e){if(!e.target)return;const t=e.target.id;if("hamburger"===t||"hamburger-i"===t){if(this.view.showHamburgerMenu(),this.model.currentUserId){const e=this.view.hamburgerMenuProjectsContainer;this.renderMenuContainer(e,100,"time","title","projects")}(()=>{const e=this.view.hamburgerMenuTopUsersContainer;this.renderMenuContainer(e,5,"visit","name","users")})()}else"hamburger-in-menu"!==t&&"hamburger-in-menu-i"!==t&&"body-disable-cover"!==t||this.view.hideHamburgerMenu()}async renderMenuContainer(e,t=5,r="time",s="name",a){try{let n="";if("users"===a?n=await this.model.getUsers(t,r):"projects"===a?n=await this.model.getProjects():console.error('missing renderMenuContainer "page"'),n.ok){const t=n.data[a];this.view.renderMenuLink(e,t,s,a)}else this.alertMessage.showAlertMessage(`${n.action}: ${n.message}`)}catch(e){console.log(e),this.alertMessage.showAlertMessage(`${e.name}: ${e.message}`)}}}document.addEventListener("DOMContentLoaded",(()=>{const e=new t,r=new s;new a(r,e)}))})()})();