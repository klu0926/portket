(()=>{"use strict";var t={183:(t,e,i)=>{i.d(e,{Z:()=>n});const n=class{constructor(){this.alertMessage=document.querySelector("#alert-message"),this.alertCloseBtn=document.querySelector("#alert-message-close-btn"),this.init()}init(){this.alertCloseBtn.addEventListener("click",(()=>{this.hideAlertMessage()}))}showAlertMessage(t,e){t||(t="Something went wrong."),this.alertMessage.querySelector(".alert-message-text").innerText=t,this.resetClass(this.alertMessage,"marginShake"),this.alertMessage.style.display="block"}hideAlertMessage(){this.alertMessage.style.display="none"}resetClass(t,e){t.classList.remove(e),setTimeout((()=>{t.classList.add(e)}),40)}}}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,i),s.exports}i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{function t(t){let e="";for(let i=0;i<t;i++){const t=Math.floor(62*Math.random());e+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(t)}return e}var e=i(183);class n{constructor(){}}class o{constructor(){this.projectForm=document.querySelector("#project-form"),this.projectFormSubmit=document.querySelector("#project-form-submit"),this.editBtn=document.querySelector("#edit-btn"),this.saveEditBtn=document.querySelector("#save-edit-btn"),this.cancelEditBtn=document.querySelector("#cancel-edit-btn"),this.editModeDisplay=document.querySelector("#edit-mode-display"),this.loadingBtn=document.querySelector("#loading-btn"),this.titleDisplay=document.querySelector("#project-title-display"),this.userAndDateDisplay=document.querySelector("#project-user-date-display"),this.linksDisplay=document.querySelector("#project-links-display"),this.descriptionDisplay=document.querySelector("#project-description-display"),this.skillsDisplay=document.querySelector("#project-skills-display"),this.contentDisplay=document.querySelector("#project-content-display"),this.statisticDivContainer=document.querySelector("#statistic"),this.coverChangeButton=document.querySelector("#cover-change-btn"),this.coverPositionButton=document.querySelector("#cover-position"),this.coverInput=document.querySelector("#cover-input"),this.coverImg=document.querySelector("#cover-img"),this.originalCover=this.coverImg.src,this.coverButtonsSetOne=document.querySelector(".cover-buttons-set-one"),this.coverButtonsSetTwo=document.querySelector(".cover-buttons-set-two"),this.coverPositionDone=document.querySelector("#cover-done-position"),this.coverPositionCancel=document.querySelector("#cover-cancel-position"),this.coverDrag=document.querySelector(".cover-drag"),this.positionInput=document.querySelector("#cover-position-input"),this.isDragging=!1,this.initPositionY,this.coverInputDiv=document.querySelector("#cover-input-div"),this.coverButtonDiv=document.querySelector("#cover-buttons-container"),this.titleInput=document.querySelector("#project-title-input-div"),this.dateInput=document.querySelector("#project-date-input-div"),this.linksInput=document.querySelector("#project-links-input-div"),this.descriptionInput=document.querySelector("#project-description-input-div"),this.skillsInput=document.querySelector("#project-skills-input-div"),this.contentInput=document.querySelector("#project-content-input-div"),this.addLinksBtn=document.querySelector("#add-link-button"),this.linksContainer=document.querySelector("#project-links-input-container"),this.linkSample=document.querySelector("#project-links-input-sample"),this.removeLinksBtns=document.querySelectorAll(".remove-link-button"),this.firstInput=document.querySelector(".first-input"),this.firstInput.dataset.uuid=t(10),this.mainContentContainer=document.querySelector("#project-content-input-container"),this.textSampleDiv=document.querySelector("#text-sample-div"),this.textInputs=document.querySelectorAll(".content-text-input"),this.toolButtons=document.querySelectorAll(".input-div-tool-btn"),this.imageSampleDiv=document.querySelector("#image-sample-div"),this.imageInputs=document.querySelectorAll(".content-image-input-div"),this.inputOptionContainer=document.querySelector("#input-option-container"),this.currentToolButton=null,this.statisticDivContainer=document.querySelector("#statistic-container"),this.viewModeElements=[this.titleDisplay,this.userAndDateDisplay,this.linksDisplay,this.descriptionDisplay,this.skillsDisplay,this.contentDisplay,this.statisticDivContainer,this.statisticDivContainer],this.editModeElements=[this.coverInputDiv,this.coverButtonDiv,this.titleInput,this.dateInput,this.linksInput,this.descriptionInput,this.skillsInput,this.contentInput],this.defaultCoverPositionY=this.getCoverPositionY(),this.init()}init(){this.hideAllEditModeElements()}hideAllEditModeElements(){this.editModeElements.forEach((t=>{t&&t.style&&(t.style.display="none")}))}enterEditMode(){this.saveEditBtn.style.display="flex",this.cancelEditBtn.style.display="flex",this.editModeElements.forEach((t=>{t&&t.style&&(t.style.display="block")})),this.editBtn.style.display="none",this.viewModeElements.forEach((t=>{t&&t.style&&(t.style.display="none")})),this.editModeDisplay.style.display="flex",this.editModeDisplay.classList.add("show-animation"),this.editModeDisplay.classList.remove("hide-animation"),this.editModeDisplay.style.animationPlayState="running",this.defaultCoverPositionY=this.getCoverPositionY()}exitEditMode(){this.projectForm.reset(),this.projectForm.classList.remove("was-validated"),this.viewModeElements.forEach((t=>{t&&t.style&&(t.style.display="block")})),this.statisticDivContainer.style.display="flex",this.editBtn.style.display="flex",this.saveEditBtn.style.display="none",this.cancelEditBtn.style.display="none",this.editModeElements.forEach((t=>{t&&t.style&&(t.style.display="none")})),this.editModeDisplay.classList.remove("show-animation"),this.editModeDisplay.classList.add("hide-animation"),this.editModeDisplay.style.animationPlayState="running",document.querySelectorAll(".new-link-input").forEach((t=>t.remove())),document.querySelectorAll(".new-content-input").forEach((t=>t.remove())),this.cancelCoverDrag()}getCoverPositionY(){const t=document.querySelector("#cover-img");if(!t)return console.error("getCoverPosition: Missing coverImg element"),50;const e=t.style.objectPosition,i=e.indexOf(" "),n=[...e];return Number(n.slice(i,-1).join("").trim())}resetCover(){this.coverImg.src=this.originalCover,this.positionInput.value=this.defaultCoverPositionY,this.resetCoverPosition()}resetCoverPosition(){this.coverImg.style.objectPosition=`center ${this.defaultCoverPositionY}%`}showCoverButtonsSetOne(){this.coverButtonsSetTwo.style.display="none",this.coverDrag.style.display="none",this.coverButtonsSetOne.style.display="flex"}showCoverButtonsSetTwo(){this.coverButtonsSetOne.style.display="none",this.coverButtonsSetTwo.style.display="flex",this.coverDrag.style.display="flex"}setCoverPosition(){this.defaultCoverPositionY=this.getCoverPositionY(),this.positionInput.value=this.defaultCoverPositionY}startDragEventHandler(t,e){this.initPositionY=e,this.isDragging=!0}dragCoverPositionEventHandler(t,e){if(this.isDragging){t.stopPropagation();let i=this.getCoverPositionY()+.5*(this.initPositionY-e);i=Math.min(100,Math.max(0,i)),this.coverImg.style.objectPosition=`center ${i}%`,this.positionInput.value=this.getCoverPositionY(),this.initPositionY=e}}stopDrag(){this.isDragging=!1}cancelCoverDrag(){this.coverButtonsSetTwo.style.display="none",this.coverDrag.style.display="none",this.coverButtonsSetOne.style.display="flex",this.coverImg.style.objectPosition=`center ${this.defaultCoverPositionY}%`}removeClosestLinkInput(t){const e=t.closest(".project-links-input-flex");e&&e.remove()}createLinkInput(){const t=this.linkSample.cloneNode(!0);t.classList.add("new-link-input"),t.querySelectorAll("input").forEach((t=>{t.removeAttribute("disabled"),t.setAttribute("required","true")}));const e=t.querySelector(".project-link-button-container").querySelector(".add-button");e.removeAttribute("id"),e.classList.remove("add-button"),e.classList.add("remove-button"),e.addEventListener("click",(()=>this.removeClosestLinkInput(e))),this.linksContainer.append(t)}textInputSetup(t){t.style.height="auto",t.style.height=Math.max(28,t.scrollHeight)+"px",t.addEventListener("input",(()=>{t.style.height="auto",t.style.height=t.scrollHeight+"px",document.querySelectorAll(".input-div-tool-btn").forEach((t=>t.style.opacity="0"))})),t.addEventListener("focus",(()=>{document.querySelectorAll(".content-text-input").forEach((e=>{e===t?e.setAttribute("placeholder","Enter text here..."):e.setAttribute("placeholder","")}));const e=t.parentElement.querySelector(".input-div-tool-btn");this.toggleToolButtons(e)}))}imageInputSetup(e){const i=e.querySelector(".inner-image-input"),n=e.querySelector(".content-image-input-display"),o=e.querySelector(".content-image-delete-btn");e.addEventListener("click",(o=>{i&&i.click(),i.addEventListener("change",(()=>{if(i.files&&i.files[0]){const o=new FileReader;o.onload=i=>{n.src=i.target.result,n.classList.remove("none"),e.dataset.uuid=t(10);const o=e.querySelector(".content-image-input");o&&(o.style.display="none")},o.readAsDataURL(i.files[0])}}))})),o.addEventListener("click",(t=>{t.stopPropagation();const i=t.target.parentNode.previousElementSibling;confirm("Do you want to delete this image?")&&(e.remove(),i||mainContentContainer.append(newTextInput()))}))}optionContainerSetup(t){const e=t.querySelector("#input-option-text"),i=t.querySelector("#input-option-image");e.addEventListener("click",(t=>{this.insertAfter(this.newTextInput(),this.currentToolButton.parentElement)})),i.addEventListener("click",(t=>{const e=this.currentToolButton.parentElement,i=e.querySelector("textarea");if(i&&0===i.value.length){const t=e.previousElementSibling;t?this.insertAfter(this.newImageInput(),t):this.insertAfter(this.newImageInput(),e),e.remove()}else this.insertAfter(this.newImageInput(),e)}))}contentSetup(){this.textInputs.forEach((t=>this.textInputSetup(t))),this.toolButtons.forEach((t=>this.toolBtnSetup(t))),this.imageInputs.forEach((t=>this.imageInputSetup(t))),this.optionContainerSetup(this.inputOptionContainer)}toolBtnSetup(t){t.addEventListener("click",(e=>{if(!this.inputOptionContainer)return;e.stopPropagation(),this.currentToolButton=t;const i=t.getBoundingClientRect(),n=i.left+window.scrollX,o=i.bottom+window.scrollY;this.inputOptionContainer.style.display="flex",this.inputOptionContainer.style.top=o+"px",this.inputOptionContainer.style.left=n+"px"}))}toggleToolButtons(t){t&&document.querySelectorAll(".input-div-tool-btn").forEach((e=>{e.style.opacity=e===t?"100":"0"}))}toggleToolButtonsOnMouseOver(t){const e=t.target;e.classList.contains("input-div-tool-btn")?document.querySelectorAll(".input-div-tool-btn").forEach((t=>{e===t&&this.toggleToolButtons(t)})):e.classList.contains("content-input-div")&&document.querySelectorAll(".content-input-div").forEach((t=>{const i=t.querySelector(".input-div-tool-btn");e===t&&this.toggleToolButtons(i)}))}hideInputOption(){this.inputOptionContainer&&(this.inputOptionContainer.style.display="none")}insertAfter(t,e){e.nextSibling&&e.parentNode.insertBefore(t,e.nextSibling);const i=t.querySelector("textarea");i&&i.focus();const n=t.querySelector(".inner-image-input");n&&n.click()}newTextInput(){const e=this.textSampleDiv.cloneNode(!0),i=e.querySelector("textarea"),n=e.querySelector(".input-div-tool-btn");return this.textInputSetup(i),this.toolBtnSetup(n),e.style.display="block",e.id="",e.dataset.uuid=t(10),i.removeAttribute("disabled"),e}focusAndSelect(t,e){if(!t)return;e||(e=t.value.length);const i=t.value.length;e>i?t.setSelectionRange(i,i):t.setSelectionRange(e,e),t.focus()}newImageInput(){const t=this.imageSampleDiv.cloneNode(!0),e=t.querySelector("input"),i=t.querySelector(".input-div-tool-btn");return this.imageInputSetup(t),this.toolBtnSetup(i),t.style.display="block",t.id="",e.removeAttribute("disabled"),t}contentKeydownHandler(t){const e=t.target,i=e.parentNode;if(e.classList.contains("content-text-input")){if(1===t.key.length&&i.classList.remove("new-input"),"Enter"===t.key){if(e.selectionEnd!==e.value.length)return;t.preventDefault(),t.stopPropagation();const n=this.newTextInput();this.insertAfter(n,i)}if("Backspace"===t.key){const i=e.parentNode.previousElementSibling;if(!i)return;const n=i.querySelector("textarea");if(""===e.value)return t.preventDefault(),e.parentNode.remove(),void this.focusAndSelect(n);if(0===e.selectionEnd)return t.preventDefault(),void this.focusAndSelect(n)}if("ArrowUp"===t.key||"ArrowDown"===t.key){let n=null;if(!isFinite(e.selectionStart))return;if(0===e.selectionStart&&"ArrowUp"===t.key&&(t.preventDefault(),n=i.previousElementSibling),e.selectionStart===e.value.length&&"ArrowDown"===t.key&&(t.preventDefault(),n=i.nextElementSibling),!n)return;const o=n.querySelector(".content-text-input");if(!o)return;const s=e.selectionStart;this.focusAndSelect(o,s)}}}previewImageOnInputChange(t,e){if(t.files&&t.files[0]){const i=new FileReader;i.onload=t=>{e.src=t.target.result},i.readAsDataURL(t.files[0])}}showLoadingBtn(){this.saveEditBtn.classList.add("hide"),this.cancelEditBtn.classList.add("hide"),this.loadingBtn.classList.remove("hide")}}class s{constructor(t,e){this.view=t,this.model=e,this.init()}init(){this.alertMessage=new e.Z,this.view.editBtn.addEventListener("click",(()=>this.enterEditMode())),this.view.cancelEditBtn.addEventListener("click",(()=>this.existEditMode())),this.view.saveEditBtn.addEventListener("click",(t=>this.handleFormSubmit(t,this.view.projectForm))),this.view.coverChangeButton.addEventListener("click",(()=>this.view.coverInput.click())),this.view.coverInput.addEventListener("click",(()=>this.view.coverInput.click())),this.view.coverPositionButton.addEventListener("click",(()=>this.view.showCoverButtonsSetTwo())),this.view.coverPositionDone.addEventListener("click",(()=>{this.view.showCoverButtonsSetOne(),this.view.setCoverPosition()})),this.view.coverPositionCancel.addEventListener("click",(()=>{this.view.showCoverButtonsSetOne(),this.view.resetCover()})),this.view.coverDrag.addEventListener("mousedown",(t=>{this.view.startDragEventHandler(t,this.getMousePositionY(t))})),this.view.coverDrag.addEventListener("mousemove",(t=>{this.view.dragCoverPositionEventHandler(t,this.getMousePositionY(t))})),this.view.coverDrag.addEventListener("mouseup",(()=>this.view.stopDrag())),this.view.addLinksBtn.addEventListener("click",(()=>this.view.createLinkInput())),this.view.removeLinksBtns.forEach((t=>{t.addEventListener("click",(()=>this.view.removeClosestLinkInput(t)))})),document.addEventListener("click",(()=>this.view.hideInputOption())),document.addEventListener("mouseover",(t=>this.view.toggleToolButtonsOnMouseOver(t))),document.addEventListener("keydown",(t=>this.view.contentKeydownHandler(t))),this.view.coverInput.addEventListener("change",(()=>this.previewCoverImage()))}enterEditMode(){this.view.enterEditMode(),this.view.contentSetup()}existEditMode(){this.view.resetCover(),this.view.exitEditMode(),this.alertMessage.hideAlertMessage()}previewCoverImage(){this.view.previewImageOnInputChange(this.view.coverInput,this.view.coverImg)}handleFormSubmit(t,e){if(e.classList.add("was-validated"),t.preventDefault(),t.stopPropagation(),e.checkValidity()){this.view.showLoadingBtn();const t=this.view.contentInput.querySelectorAll(".content-input-div"),i=[];for(let e=0;e<t.length;e++){const n=t[e],o=n.querySelector("textarea"),s=n.querySelector(".inner-image-input");0===e&&o&&""===o.value.trim()||n.classList.contains("first-input")&&""===o.value.trim()||s&&0===s.files.length&&!s.dataset.original||i.push(n)}i.forEach((t=>{const i=document.createElement("input"),n=document.createElement("input");i.type="text",i.name="order",n.type="text",n.name="uuid",i.classList.add("none"),n.classList.add("none"),t.classList.contains("data-text")?i.value="text":t.classList.contains("data-image")&&(i.value="image"),n.value=t.dataset.uuid,e.append(i),e.append(n)})),e.submit()}else this.alertMessage.showAlertMessage("Missing form information.")}getMousePositionY(t){return t.clientY+window.scrollY}}document.addEventListener("DOMContentLoaded",(()=>{const t=new n,e=new o;new s(e,t)}))})()})();